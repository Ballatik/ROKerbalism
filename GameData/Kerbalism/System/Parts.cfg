
// SOURCES

// NTRS - https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20090029327.pdf


// ==============================================================================
// Add predetermined Life Support to parts
// ==============================================================================

//Aviation
@PART[SXTBuzzard|SXTmk3Cockpit52|SXTke111|25mKossak|SXTClyde|625mBonny|SXTmeadowlark|SXTEntenteCordiale|SXTGoose|SXTOsaulNoseCockpitAn225|RP0Nose-Cockpit||X1_Crew|Mark1Cockpit|Mark2Cockpit]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{ 
	MODULE
  {
    name = ProcessController
    resource = _AirPump
    title = Air Pump
    capacity = #$/CrewCapacity$
    running = true
  }
}

//Mercury
@PART[FASAMercuryPod|mk1pod|mk1pod_v2]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _NonRegenScrubber
    title = Scrubber
    capacity = 1.0
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = 1.0
	toggle = true
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.0
  }

    MODULE
  {
    name = Configure
    title = Early Capsule
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. <b>WARNING: Only lasts 2 days!</b>
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _NonRegenScrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }  
}

//Vostok/Voskhod
@PART[ROC-VostokCapsule|ROC-VoskhodCapsule]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _NonRegenScrubber
    title = Non-regenerative Scrubber
    capacity = 6.0
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _NonRegenHumidityController
    title = Non-regenerative Humidity Controller
    capacity = 6.0
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = Pressure control
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _AirPump
    title = Air Pump
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.0
  }

    MODULE
  {
    name = Configure
    title = Vostok/Voskhod Capsule
    slots = 3
    
    SETUP
    {
      name = Non-regenerative Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. <b>WARNING: Only lasts 12 days!</b>
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _NonRegenScrubber
      }
    }

	SETUP
    {
      name = Non-regenerative Humidity Controller
      desc = Removes water from the internal atmosphere through chemical absorption. <b>WARNING: Only lasts 12 days!</b>
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _NonRegenHumidityController
      }
	}
	    SETUP
    {
      name = Pressure Control
      desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _PressureControl
      }

      // Air pump always is add with pressureControl
      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AirPump
      }

      RESOURCE
      {
        name = Nitrogen
        amount = #$/CrewCapacity$
        maxAmount = #$/CrewCapacity$
        @amount *= 500  // FIXME 
        @maxAmount *= 500
      }
    }
  }
}

//Gemini
@PART[FASAGeminiPod2|FASAGeminiPod2White|ROAdvCapsule]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.3
  }

  MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
  
    MODULE
  {
    name = Configure
    title = Gemini Capsule
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}
//Early Spaceplanes
@PART[RO-Mk1Cockpit|RO-Mk1CockpitInline|MK1CrewCabin]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
	MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
    MODULE
  {
    name = ProcessController
    resource = _AirPump
    title = Air Pump
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.3
  }
  
  MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }

  MODULE
  {
    name = Configure
    title = Early Spaceplane
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}
//Big Gemini
@PART[FASAGeminiBigG|FASAGeminiBigGWhite]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.2
  }
  
    MODULE
  {
    name = Configure
    title = passenger compartment
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes <b>Water</b> from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}
//Early Landers
@PART[landerCabinSmall|FASA_Gemini_Lander_Pod]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _NonRegenScrubberScrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.1
  }
  
    MODULE
  {
    name = Configure
    title = Early Lander
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. <b>WARNING: Only lasts 2 days!</b>
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _NonRegenScrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes <b>Water</b> from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}

//Apollo
@PART[APOLLO_CM|FASAApollo_CM|bluedog_Apollo_Block2_Capsule|ROC-ApolloCM]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }

    MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
  
    MODULE
  {
    name = Configure
    title = Apollo Command Module
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }  
}
//Apollo SM
@PART[APOLLO_SM|FASAApollo_SM|bluedog_Apollo_Block2_ServiceModule]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _FuelCell
    title = Fuel Cell 1 
    capacity = 1.42
	toggle = true
    running = true
  }
   MODULE
  {
    name = ProcessController
    resource = _FuelCell
    title = Fuel Cell 2
    capacity = 1.42
	toggle = true
    running = true
  }
   MODULE
  {
    name = ProcessController
    resource = _FuelCell
    title = Fuel Cell 3
    capacity = 1.42
	toggle = true
    running = true
  }
}
//Landers
@PART[LEM_ASCENT_STAGE|FASALM_AscentStage|bluedog_LEM_Ascent_Cockpit|landerCabinMedium|mk2LanderCan|SXTLander]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
 
    MODULE
  {
    name = Configure
    title = Lander Module
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}
//Spaceplanes
@PART[mk2Cockpit_Inline|mk2Cockpit_Standard|mk2CrewCabin]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
    MODULE
  {
    name = ProcessController
    resource = _AirPump
    title = Air Pump
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }

    MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
  
    MODULE
  {
    name = Configure
    title = Mk2 Spaceplane (Apollo class)
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }  
}
//Apollo Block III
@PART[bluedog_Apollo_Block3_Capsule]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }

    MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
  
    MODULE
  {
    name = Configure
    title = Apollo Command Module Block 3+
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Humidity Controller
      desc = Reclaims <b>Water</b> out of the internal atmosphere to maintain humidity.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }
  }  
}

//TKS
@PART[MK2VApod]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
 
    MODULE
  {
    name = Configure
    title = TKS
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}

//Shuttle
@PART[mk3Cockpit_Shuttle]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = Pressure control
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _AirPump
    title = Air Pump
    capacity = #$/CrewCapacity$
    running = true
  }
  
 MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _FuelCell
    title = Fuel Cell
    capacity = 7
    running = false
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
  
  MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }

  MODULE
  {
    name = Configure
    title = Pod
    slots = 4
    
    SETUP
    {
      name = Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

    SETUP
    {
      name = Pressure Control
      desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _PressureControl
      }

      // Air pump always is add with pressureControl
      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AirPump
      }

      RESOURCE
      {
        name = Nitrogen
        amount = #$/CrewCapacity$
        maxAmount = #$/CrewCapacity$
        @amount *= 500  // FIXME 
        @maxAmount *= 500
      }
    }
	
	SETUP
    {
      name = Humidity Controller
      desc = Removes water from the internal atmosphere.

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }

    SETUP
    {
      name = Fuel Cell
      desc = A fuel cell that burns <b>Liquid Hydrogen</b> and <b>Liquid Oxygen</b>, producing <b>Water</b> as a by-product.

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _FuelCell
      }
    }
  }
}

//Orion
@PART[XOrionPodXbb31|SSTU-SC-C-CM]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _VacScrubber
    title = Vacuum Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
    MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = Pressure control
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _AirPump
    title = Air Pump
    capacity = #$/CrewCapacity$
    running = true
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
  
  MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
 
    MODULE
  {
    name = Configure
    title = Orion
    slots = 3
    
    SETUP
    {
      name = Vacuum Scrubber
      desc = A dual-bed vacuum-exposing regenerative scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _VacScrubber
      }
    }

	SETUP
    {
      name = Humidity Controller
      desc = Reclaims <b>Water</b> out of the internal atmosphere to maintain humidity.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }
	
	SETUP
    {
      name = Pressure Control
      desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _PressureControl
      }

      // Air pump always is add with pressureControl
      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AirPump
      }

      RESOURCE
      {
        name = Nitrogen
        amount = #$/CrewCapacity$
        maxAmount = #$/CrewCapacity$
        @amount *= 500  // FIXME 
        @maxAmount *= 500
      }
    }
  }
}

// ==============================================================================
// Habitats
// ==============================================================================
//X-15
@PART[KerbCan|RO-Mk1CrewModule]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{ 
	MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.2
  }
  
  MODULE
  {
    name = Configure
    title = Habitat (X-15 class)
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}
//Early Space Stations
@PART[SXTCrewCabSSP20|SXTCrewCabSSP10|FASAGeminiMOLSci]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.5
  }
  
  @MODULE[Habitat]
  {
	max_pressure = 0.3
  }
  
  MODULE
  {
    name = Configure
    title = Habitat Prototype
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Humidity Controller
      desc = Reclaims <b>Water</b> out of the internal atmosphere to maintain humidity.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }
  }
}
//Skylab
@PART[SXTISSHabISK30|crewCabin|Large_Crewed_Lab|SXTSPKTRCabin]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{ 
	MODULE
  {
    name = ProcessController
    resource = _AdvScrubber
    title = Vacuum Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
  
  @MODULE[Habitat]
  {
	max_pressure = 0.3
  }

  MODULE
  {
    name = Configure
    title = Habitat (Skylab class)
    slots = 2
    
    SETUP
    {
      name = Advanced Vacuum Scrubber
      desc = A dual-bed vacuum-exposing regenerative scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AdvScrubber
      }
    }

	SETUP
    {
      name = Humidity Controller
      desc = Reclaims <b>Water</b> out of the internal atmosphere to maintain humidity.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }
  }
}
//ISS
@PART[STXCANIOT]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{ 
	MODULE
  {
    name = ProcessController
    resource = _AdvScrubber
    title = Vacuum Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
    MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = Pressure control
    capacity = #$/CrewCapacity$
    running = true
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
  
  MODULE
  {
    name = Configure
    title = Habitat (ISS class)
    slots = 2
    
    SETUP
    {
      name = Advanced Vacuum Scrubber
      desc = A dual-bed vacuum-exposing regenerative scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Tip: use Water Electrolysis to produce O2.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AdvScrubber
      }
    }

	SETUP
    {
      name = Humidity Controller
      desc = Reclaims <b>Water</b> out of the internal atmosphere to maintain humidity.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }
	
	    SETUP
    {
      name = Pressure Control
      desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _PressureControl
      }

      RESOURCE
      {
        // approx 5 days of leaks and volume of a crew member
        // crew going eva will need the volume their bodies displaced within the vessel replaced with N2 to correct pressure drop,
        // vise versa when entering from eva the pressure will increase due to the volume of the Kerbal displacing
        // the internal vessel atmosphere, excess is vented overboard.
	    // The pressure controller can be disabled to save N2 that will be used replacing the Kerbals volume,
        name = Nitrogen
        amount = #$/CrewCapacity$
        maxAmount = #$/CrewCapacity$
        @amount *= 331.3  // 1.3 for leaks, 330 Kerbal volume
        @maxAmount *= 331.3
      }
    }
  }
}

//Near future, completely configurable for surface bases and advanced space stations
@PART[InflatableHAB|SXTDLK83EHabitat]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
    MODULE
  {
    name = ProcessController
    resource = _AdvScrubber
    title = Vacuum Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = Pressure control
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity controller
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _WaterRecycler
    title = Water recycler
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _WasteProcessor
    title = Waste processor
    capacity = #$/CrewCapacity$
    running = true
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }

  MODULE
  {
    name = Configure
    title = Habitat
    slots = 2

    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

    SETUP
    {
      name = Advanced Vacuum Scrubber
      desc = A dual-bed vacuum-exposing regenerative scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.01
      cost = 250

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AdvScrubber
      }
    }

    SETUP
    {
      name = Pressure Control
      desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.
      mass = 0.01
      cost = 250

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _PressureControl
      }

      RESOURCE
      {
        // approx 5 days of leaks and volume of a crew member
        // crew going eva will need the volume their bodies displaced within the vessel replaced with N2 to correct pressure drop,
        // vise versa when entering from eva the pressure will increase due to the volume of the Kerbal displacing
        // the internal vessel atmosphere, excess is vented overboard.
	    // The pressure controller can be disabled to save N2 that will be used replacing the Kerbals volume,
        name = Nitrogen
        amount = #$/CrewCapacity$
        maxAmount = #$/CrewCapacity$
        @amount *= 331.3  // 1.3 for leaks, 330 Kerbal volume
        @maxAmount *= 331.3
      }
    }

    SETUP
    {
      name = Humidity Controller
      desc = Reclaims <b>Water</b> out of the internal atmosphere to maintain humidity.
      mass = 0.015
      cost = 300


      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }

    SETUP
    {
      name = Water Recycler
      desc = Filter impurities out of <b>WasteWater</b>.
      mass = 0.05
      cost = 500


      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _WaterRecycler
      }

      RESOURCE
      {
        name = WasteWater
        amount = 0
        maxAmount = #$/CrewCapacity$
        @maxAmount *= 5
      }
    }

    SETUP
    {
      name = Waste Processor
      desc = Extract <b>Ammonia</b> out of decomposing organic <b>Waste</b>.
      mass = 0.05
      cost = 500

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _WasteProcessor
      }

      RESOURCE
      {
        name = Waste
        amount = 0
        maxAmount = #$/CrewCapacity$
        @maxAmount *= 5
      }
    }
  }
}