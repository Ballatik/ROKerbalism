// ============================================================================
// Replacing stock experiments
// ============================================================================
@PART[*]:HAS[@MODULE[DMModuleScienceAnimateGeneric]:HAS[#experimentID[RP0photos1]]]:NEEDS[FeatureScience]:FOR[RP-1]
{
	!MODULE[DMModuleScienceAnimateGeneric]:HAS[#experimentID[RP0photos1]]	{}
	MODULE
	{
		name = Experiment
		experiment_id = RP0photos1
	}
}

// ============================================================================
// Reconfigure experiments(avoiding a global nuke to keep people happy)
// strongly recommendeded to not change anything in this section
// Separate from above due to Configure Groups.
// ============================================================================
@PART[*]:HAS[@MODULE[Experiment]]:NEEDS[FeatureScience]:AFTER[RP-1]
{
	@MODULE[Experiment]:HAS[#experiment_id[RP0photos1]]
	{
		%sample_mass = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos1/SampleMass$
		%sample_reservoir = #$sample_mass$
		%ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos1/ECCost$
		%data_rate = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos1/size$
		@data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/RP0photos1/duration$
		requires = Body:Earth
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[RP0photos1]]:NEEDS[FeatureScience]:AFTER[RP-1]
{
	@baseValue = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos1/value$
	@dataScale = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos1/size$
	@dataScale /= #$baseValue$
}

// ============================================================================
// Photography 2, Corona satellites
// ============================================================================
@PART[*]:HAS[@MODULE[ModuleScienceExperiment]:HAS[#experimentID[RP0photos2]]]:NEEDS[FeatureScience]:FOR[RP-1]
{
	!MODULE[ModuleScienceExperiment]:HAS[#experimentID[RP0photos2]]	{}
	MODULE
	{
		name = Experiment
		experiment_id = RP0photos2
	}
}

@PART[*]:HAS[@MODULE[Experiment]]:NEEDS[FeatureScience]:AFTER[RP-1]
{
	@MODULE[Experiment]:HAS[#experiment_id[RP0photos2]]
	{
		%sample_mass = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos2/SampleMass$
		%sample_reservoir = #$sample_mass$
		%ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos2/ECCost$
		%data_rate = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos2/size$
		@data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/RP0photos2/duration$
		requires = Body:Earth,OrbitMinInclination:60,OrbitMaxInclination:100,OrbitMaxEccentricity:0.035,AltitudeMax:445000
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[RP0photos2]]:NEEDS[FeatureScience]:AFTER[RP-1]
{
	@baseValue = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos2/value$
	@dataScale = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos2/size$
	@dataScale /= #$baseValue$
	@biomeMask = 0
}

// ============================================================================
// Photography 3, KH-9 satellites
// ============================================================================
@PART[*]:HAS[@MODULE[ModuleScienceExperiment]:HAS[#experimentID[RP0photos3]]]:NEEDS[FeatureScience]:FOR[RP-1]
{
	!MODULE[ModuleScienceExperiment]:HAS[#experimentID[RP0photos3]]	{}
	MODULE
	{
		name = Experiment
		experiment_id = RP0photos3
	}
}

@PART[*]:HAS[@MODULE[Experiment]]:NEEDS[FeatureScience]:AFTER[RP-1]
{
	@MODULE[Experiment]:HAS[#experiment_id[RP0photos3]]
	{
		%sample_mass = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos3/SampleMass$
		%sample_reservoir = #$sample_mass$
		%ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos3/ECCost$
		%data_rate = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos3/size$
		@data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/RP0photos3/duration$
		requires = Body:Earth,OrbitMinInclination:94.5,OrbitMaxInclination:97,OrbitMaxEccentricity:0.01
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[RP0photos3]]:NEEDS[FeatureScience]:AFTER[RP-1]
{
	@baseValue = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos3/value$
	@dataScale = #$@KERBALISM_EXPERIMENT_VALUES/RP0photos3/size$
	@dataScale /= #$baseValue$
	@biomeMask = 0
}
// ============================================================================
// Add experiment to parts
// ============================================================================
@PART[RO-ImprovedFilmCamera]:NEEDS[FeatureScience]:BEFORE[RP-1]
{
	MODULE
    {
        name = ModuleScienceExperiment
        experimentID = RP0photos2
        experimentActionName = Planetary Photography Level 2
        resetActionName = Discard Photos
        reviewActionName = Review Stored Photos
        useStaging = False
        useActionGroups = True
        hideUIwhenUnavailable = True
        rerunnable = True
        xmitDataScalar = 0.25
        usageReqMaskInternal = 1
        usageReqMaskExternal = 4
		dataIsCollectable = true
    }
}
@PART[RO-HighResFilmCamera|FASAGeminiMOLSci]:NEEDS[FeatureScience]:BEFORE[RP-1]
{
	MODULE
    {
        name = ModuleScienceExperiment
        experimentID = RP0photos3
        experimentActionName = Planetary Photography Level 3
        resetActionName = Discard Photos
        reviewActionName = Review Stored Photos
        useStaging = False
        useActionGroups = True
        hideUIwhenUnavailable = True
        rerunnable = True
        xmitDataScalar = 0.25
        usageReqMaskInternal = 1
        usageReqMaskExternal = 4
		dataIsCollectable = true
    }
}
